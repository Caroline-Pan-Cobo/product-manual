---
title: "创建链上合约交互风控规则"
sidebarTitle: "创建链上合约交互风控规则"
---

<Note>在设置前链上合约交互风控规则前，请确保您已[创建 Delegate Key](/cn/portal/risk-controls/on-chain-tx-type)，并将资产添加到所选钱包。</Note>

1. 登录 [Cobo Portal](https://portal.cobo.com/login)。
2. 点击左侧主菜单中的 <img src="/cn/images/risk-controls/button_wallet.svg" className="icon"></img> > **智能合约钱包**。
3. 点击您在 Cobo Portal 上已经连接或创建的 Safe&#123;Wallet&#125;。
4. 切换到**链上交易风控**标签页，然后点击 <img src="/cn/images/risk-controls/button_create policy.svg" className="icon"></img>。
5. 为您的链上交易风控规则添加名称，最多可输入 50 个字符。
6. 选择该风控规则将应用的 Delegate。请注意，每个 Delegate都是一个 EOA 地址。在成功创建链上交易风控规则后，您选择的 Delegate 将获得执行授单签操作的授权，例如代币转账和自定义合约调用。
- 我的钱包：从 MPC 钱包（机构钱包）中选择地址并将地址指定为 Delegate。
- 自定义地址：手动输入 EOA 地址以将地址指定为 Delegate。
<img src="/cn/images/risk-controls/5.png" className="screenshot_full_screen"></img>
7. 点击下拉菜单设置条件。
- 代币授权：您可以指定可以使用的代币类型、有权使用所选代币的合约地址，以及每次交易或每个指定时段内可使用的最高额度。
- 代币转账：您可以指定可以转账的代币类型、接收地址，以及每次交易或每个指定时段内可转账的最高额度。
- 自定义合约交互：您可以指定要调用的智能合约、要使用的功能，以及每次交易中包含的参数。
<img src="/cn/images/risk-controls/6.png" className="screenshot_modal"></img>
8. （如果您选择代币授权）请填写以下字段：
- 代币：在下拉菜单中，点击**包括**，选择您要授权的代币类型。
- 金额：如果被授权的代币没有使用数量限制，在下拉菜单中选择**任何数量**。如果需要设置数量上限，请选择**按数量计算**。
- 频率：如果数量限制适用于所有被授权合约地址的总交易数，在下拉菜单中选择**无频率限制**。如果数量限制适用于每次交易，选择**每笔交易**，或者选择**按小时**，指定数量限制适用的小时数。
- 被授权的合约地址：在下拉菜单中，选择**任何地址**，允许任意合约地址使用被授权的代币。选择**在地址列表中**，则只有已经添加到[地址列表](/cn/portal/risk-controls/address-list)中的合约地址才有权使用被授权的代币。
    - 请注意，如果您需要编辑已提交的链上交易风控规则中的被授权的合约地址，必须首先前往**交易风控** > **地址列表**来更新地址。然后，前往**智能合约钱包** > **链上交易风控** > **当前**，修改相关的链上交易风控规则，并重新提交多签请求。
<img src="/cn/images/risk-controls/7.png" className="screenshot_full_screen"></img>
9.  （如果您选择代币转账）请填写以下字段：
- 代币：在下拉菜单中，点击**包括**，选择您要授权的代币类型。
- 数量：如果被授权的代币没有转账数量限制，在下拉菜单中选择**任何数量**。如果需要设置转账上限，请选择**按数量计算**。
- 频率：如果转账数量限制适用于所有接收地址的总交易数，在下拉菜单中选择**无频率限制**。如果转账数量限制适用于每次交易，选择**每笔交易**，或者选择**按小时**，指定数量限制适用的小时数。
- 接收地址：在下拉菜单中，选择**任何地址**，允许将代币转账到任意地址。选择**在地址列表中**，则仅允许向已添加到[地址列表](/cn/portal/risk-controls/address-list)中的地址进行转账。
    - 请注意，如果您需要编辑已提交的链上交易风控规则中的接收地址，必须首先前往**交易风控** > **地址列表**来更新地址。然后，前往**智能合约钱包** > **链上交易风控** > **当前**，修改相关的链上交易风控规则，并重新提交多签请求。
<img src="/cn/images/risk-controls/8.png" className="screenshot_full_screen"></img>
10.  （如果您选择自定义合约交互）请选择是在合约级别、方法级别还是参数级别进行合约交互。然后，填写相应的字段：
- 合约级
    - 如果您之前添加过目标合约，请在下拉菜单中直接进行搜索。如果没有，则在下拉菜单的文本框内输入合约地址，然后点击**添加地址**。
- 方法级
    - 如果您之前添加过目标合约，请在下拉菜单中直接进行搜索。如果没有，则在下拉菜单的文本框内输入合约地址，然后点击**添加地址**。
    - 从下拉菜单中选择方法。如果显示的方法不正确，点击**编辑合约 ABI**。在弹出窗口中，您可以手动编辑文本或从设备上传 JSON 文件。
- 参数级
    - 如果您之前添加过目标合约，请在下拉菜单中直接进行搜索。如果没有，则在下拉菜单的文本框内输入合约地址，然后点击**添加地址**。
    - 从下拉菜单中选择一个方法。如果显示的方法不正确，点击**编辑合约 ABI**。在弹出窗口中，您可以手动编辑文本或从设备上传 JSON 文件。
    - 点击**创建**以添加参数。在弹出窗口中，根据您的合约调用需求指定参数、运算符和取值。如果要添加一组参数，点击 **+ 添加组**。
<img src="/cn/images/risk-controls/9.png" className="screenshot_full_screen"></img>
11. 点击**下一步**，查看您配置的规则。请注意，为智能合约钱包设置链上交易风控规则与授予链上权限类似。因此，任何在此规则下触发的链上交易都将被自动批准。
12. 如果要对规则进行编辑，点击**取消**。
13. 需要 Safe&#123;Wallet&#125; 签名人完成多签确认。点击**确认**，提交多签请求。或者，点击**添加到队列**，稍后前往**智能合约钱包** > **链上交易风控** > **队列**，批量提交队列中所有的多签请求。
<Tip>这篇文档对您有帮助吗？欢迎[提交反馈](https://forms.zohopublic.com/cobo/form/DocumentFeedbackForm/formperma/QvLOhxJv1_JMsJ-1dleZ8Itb_7rzN-LtgvsDdxosoVI)，让我们知道您的想法。</Tip>